<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>Quản lý tài khoản</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta content="Responsive bootstrap 4 admin template" name="description" />
    <meta content="Coderthemes" name="author" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <link href="../assets/css/bootstrap.min.css" rel="stylesheet" type="text/css" id="bootstrap-stylesheet" />
    <link href="../assets/css/icons.min.css" rel="stylesheet" type="text/css" />
    <link href="../assets/css/app.min.css" rel="stylesheet" type="text/css" id="app-stylesheet" />
    <link rel="stylesheet" href="../CSS/Qlyproduct.css">
</head>

<body>
    <!-- Begin page -->
    <div id="wrapper">
        <!-- Topbar Start -->
        <div class="navbar-custom" style="background-color: #128C7E;">
            <ul class="list-unstyled topnav-menu float-right mb-0">
                <li class="">
                    <a class="nav-link dropdown-toggle  waves-effect waves-light" data-toggle="dropdown" href="#"
                        role="button" aria-haspopup="false" aria-expanded="false">
                        <i class="fas fa-sign-out-alt" style="color: white;" onclick="logOut()"> Log out</i>

                    </a>
                    <div class="dropdown-menu dropdown-menu-right dropdown-lg">
                    </div>
                </li>

                <li class="dropdown notification-list">
                    <div class="dropdown-menu dropdown-menu-right dropdown-lg">
                        <div class="dropdown-item noti-title">
                            <h5 class="font-16 text-white m-0">

                            </h5>
                        </div>
                    </div>
                </li>

                <li class="dropdown notification-list">
                    <a class="nav-link dropdown-toggle nav-user mr-0 waves-effect waves-light" data-toggle="dropdown"
                        href="#" role="button" aria-haspopup="false" aria-expanded="false">
                        <img src="../images/búa liềm.jfif" alt="user-image" class="rounded-circle">
                        <span class="d-none d-sm-inline-block ml-1 font-weight-medium"
                            style="color: white;">Admin</span>

                    </a>
                </li>
                <li class="dropdown notification-list">
                    <a href="javascript:void(0);" class="nav-link right-bar-toggle waves-effect waves-light">
                        <i class="mdi mdi-settings-outline noti-icon"></i>
                    </a>
                </li>
            </ul>

            <!-- LOGO -->
            <div class="logo-box">
                <a href="../index.html" class="logo text-center logo-dark" target="_blank">
                    <span class="logo-lg">
                        <img src="../images/logo.png" alt="" height="70" width="250"
                            style="background-color:#128C7E ; background-size: cover;">
                        <!-- <span class="logo-lg-text-dark">Uplon</span> -->
                    </span>

                </a>


            </div>

            <ul class="list-unstyled topnav-menu topnav-menu-left m-0">
                <li>
                    <button class="button-menu-mobile waves-effect waves-light">
                        <i class="mdi mdi-menu"></i>
                    </button>
                </li>

                <li class="d-none d-sm-block">
                    <form class="app-search">
                        <div class="app-search-box">
                            <div class="input-group">
                                <input type="text" class="form-control" placeholder="Search...">
                                <div class="input-group-append">
                                    <button class="btn" type="submit">
                                        <i class="fas fa-search"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </form>
                </li>
            </ul>
        </div>
        <div class="left-side-menu">
            <div class="slimscroll-menu">
                <!--- Sidemenu -->
                <div class="left-side-menu" style="background-color: #128C7E;;">
                    <div class="slimscroll-menu">
                        <!--- Sidemenu -->
                        <div id="sidebar-menu">
                            <ul class="metismenu" id="side-menu">
                                <li class="menu-title" style="color: #fff">Navigation</li>
                                <li>
                                    <a href="../admin/QlyProducts.html">
                                        <i class="mdi mdi-view-dashboard" style="color: #fff"></i>
                                        <span style="color:#fff; font-weight: 500;"> Quản lí sản phẩm </span>
                                    </a>
                                </li>
                                <li>
                                    <a href="../admin/qlyCategory.html">
                                        <i class="mdi mdi-shape" style="color: #fff"></i>
                                        <span style="color:#fff; font-weight: 500;"> Quản lí phân loại </span>
                                    </a>
                                </li>
                                <li>
                                    <a href="../admin/QlyUser.html">
                                        <i class="mdi mdi-account-group" style="color: #fff"></i>
                                        <span style="color:#fff; font-weight: 500;"> Quản lí người dùng </span>
                                    </a>
                                </li>
                                <li>
                                    <a href="Qlydonhang.html">
                                        <i class="mdi mdi-cart" style="color: #fff"></i>
                                        <span style="color:#fff; font-weight: 500;"> Quản lí đơn hàng </span>
                                    </a>
                                </li>
                            </ul>
                        </div>
                        <!-- End Sidebar -->
                    </div>
                    <!-- Sidebar -left -->
                </div>
                <!-- End Sidebar -->
            </div>
            <!-- Sidebar -left -->
        </div>
        <div class="content-page">
            <div class="content">
                <!-- Start Content-->
                <div class="container-fluid">
                    <!-- start page title -->
                    <div class="row">
                        <div class="col-12">
                            <div class="page-title-box">
                                <h4 class="page-title" style=" font-size: 50px;">Quản lí người dùng</h4>
                            </div>
                            <div class="product">
                                <div class="users">
                                    <h3>Quản lí người dùng</h3>
                                    <table id="tableUser" style="text-align: center; font-size: 20px"></table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <footer class="footer">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-md-12">
                            Admin
                        </div>
                    </div>
                </div>
            </footer>
        </div>
        <script src="../JS/QlyUser.js"></script>
        <script>
            function renderUser() {
                let users = JSON.parse(localStorage.getItem("users"));
                let result = `
        <tr class="tr1">
          <td class="td1">Email</td>
          <td class="td1">Tên người dùng</td>
          <td class="td1" colspan="2">Tính năng</td>
          <td class="td1" colspan="2">Trạng thái</td>
        </tr> 
  `;
                for (let i = 0; i < users.length; i++) {
                    result += `
        <tr class="tr1">
            <td class="td1">${users[i].email}</td>
            <td class="td1">${users[i].username}</td>
            <td class="td1"><button id="button_${i}" class="buttonNe" onclick="banUser(${i})">Ban</button></td>
            <td class="td1"><button class="buttonNe" onclick="deleteUser(${i})">Delete</button>
            <td class="td1"><span id="trangthai_${i}">${users[i].status}</span></td>
        </tr> 
    `;
                }
                document.getElementById("tableUser").innerHTML = result;
            }
            renderUser();
            function deleteUser(id) {
                let users = JSON.parse(localStorage.getItem("users"));
                users.splice(id, 1);
                localStorage.setItem("users", JSON.stringify(users));
                renderUser();
            }
            function banUser(id) {
                let users = JSON.parse(localStorage.getItem("users"));
                let user = users[id];
                if (user.status === "Available") {
                    user.status = "Unavailable";
                    document.getElementById(`button_${id}`).innerHTML = "UnBan";
                } else {
                    user.status = "Available";
                    document.getElementById(`button_${id}`).innerHTML = "Ban";
                }
                document.getElementById(`trangthai_${id}`).innerHTML = user.status;
                localStorage.setItem("users", JSON.stringify(users));
            }
        </script>
</body>

</html>